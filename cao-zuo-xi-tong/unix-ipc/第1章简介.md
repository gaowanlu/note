---
coverY: 0
---

# 第1章 简介

## 简介

### 什么是IPC

IPC即Interprocess Communication,进程间通信，主要学习4种不同的IPC形式  
1、消息传递(管道、FIFO、消息队列)  
2、同步(互斥量、条件变量、读写锁、文件和记录锁、信号量)  
3、共享内存(匿名的和具体的)  
4、远程过程调用(Solaris门和Sun RPC)  

### UNIX进程间消息传递的演变

* 管道，只能在具有共同祖先(父子进程关系)的进程间使用  
* System V消息队列，可以在同主机上有亲缘或者无亲缘关系的进程间通信  
* POXIS消息队列，可以在同主机上有亲缘或者无亲缘关系的进程间通信  
* RPC（Remote Procedure Call）,远程过程调用，可以跨主机  

### UNIX进程间同步

主要有防止多个进程同时修改同一文件、记录上锁、SystemV信号量、POSIX信号量、互斥锁、读写锁等内容  

### 进程、线程与信息共享

1、两个进程通过内核操作文件系统进行信息共享  
2、两个进程通过内核中的信息进行共享  
3、两个进程通过用户态的共享内存区进行信息共享  

### 线程

一个进程可以有多个线程，可以去学习C++并发编程部分的笔记  

### IPC对象的持续性

1、进程：随着进程持续的IPC，一直存在打开着IPC对象的最后一个进程关闭该对象为止  
2、内核：随着内核持续的IPC，一直存在到内核重新自举、或者显式删除IPC对象为止  
3、随文件系统持续的IPC，一直存在到显式删除IPC对象为止  

### 名字空间

涉及全书的展望与总结，暂时略过  

### fork、exec、exit对IPC对象的影响

涉及全书的展望与总结，暂时略过  

### 出错处理：包裹函数

再掉用一些函数时，可能需要对错误做出处理，写自己的包裹函数是一个好办法  

```cpp
void Sem_post(sem_t*sem){
    if(sem_post(sem)==-1){//先不用管sem_post是干嘛的，这里只是举个例子
        err_sys("sem_post error");
    }
}

void Pthread_mutex_lock(pthread_mutex_t*mptr){
    int n;
    if((n=pthread_mutex_lock(mptr))==0){
        return;
    }
    errno=n;
    err_sys("pthread_mutex_lock error");
}
```

### Unix errno值

当unix函数发生错误时，全局变量errno将被设置为一个指示错误类型的正数，通常函数本身返回-1，返回正的错误值都是常值，具有E打头的全部为大写字母的名字，通常定义在`<sys/errno.h>`头文件中  

### Unix标准化

1、Posix,指可移植操作系统接口，(Portable Operating System Interface)，是由ISO与IEC采纳的国际标准  
2、Open Goup是一个公司和基金会

主要由两类组织在为Unix标准化做工作  
